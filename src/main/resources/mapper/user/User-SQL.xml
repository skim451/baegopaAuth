<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="user">
	<select id="selectUserList" resultType="com.baegopa.auth.dto.UserDTO">
		<![CDATA[
			SELECT
    			id, 
    			email,
    			password, 
    			use_yn, 
    			created_at, 
    			updated_at
			FROM
   				users  
			ORDER BY id ASC
		]]>
	</select>
	
	<insert id="insertUser" parameterType="com.baegopa.auth.dto.UserDTO">
	    <![CDATA[
	        INSERT INTO users
	        (
	            id, 
	            email, 
	            password, 
	            use_yn, 
	            created_at, 
	            updated_at
	        )
	        
	        VALUES
	        (
	            #{id},
	            #{email},
	            #{password},
	            'Y', 
	            NOW(),
	            NOW()
	        )
	    ]]>
	</insert>
	
	<update id="updateUser" parameterType="com.baegopa.auth.dto.UserDTO">
	    <![CDATA[
	        UPDATE users
	        SET
	            password = #{newPassword} 
	        WHERE
	            id = #{id} AND password = #{password}   
	    ]]>
	</update>
	
	<update id="deleteUser" parameterType="com.baegopa.auth.dto.UserDTO"> 
		<![CDATA[
	        UPDATE users
	        SET
	            use_yn = 'N'
	        WHERE
	            id = #{id} AND password = #{password}   
	    ]]>
	</update>
	
</mapper>

