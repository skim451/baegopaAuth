<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="user">
	<select id="selectUser" parameterType="String" resultType="com.baegopa.auth.dto.User">
		<![CDATA[
			SELECT
    			id,
				email,
				password,
				sns_type, 
				use_yn,
				recommended_time, 
				recommended_use_yn,
				created_at,
				updated_at
			FROM
   				users  
   			WHERE
   				email=#{email}
   				use_yn='Y'
		]]>
	</select>
	
	<select id="selectUserListByPage" parameterType="int" resultType="com.baegopa.auth.dto.User">
		<![CDATA[
			SELECT
    			id,
				email,
				password,
				sns_type, 
				use_yn,
				recommended_time, 
				recommended_use_yn,
				created_at,
				updated_at
			FROM
   				users  
   			WHERE
   				id >= #{pageNum} * 25 AND
   				id <  (#{pageNum}+1) * 25
			ORDER BY id ASC
		]]>
	</select>
	
	<insert id="insertUser" parameterType="com.baegopa.auth.dto.User" >
	    <![CDATA[
	        INSERT INTO users
	        (
	            id,
				email,
				password,
				sns_type, 
				use_yn,
				recommended_time, 
				recommended_use_yn,
				created_at,
				updated_at
	        )
	        
	        VALUES
	        (
	            #{id},
	            #{email},
	            #{password},
	            #{snsType},
	            'Y', 
	            NOW(),
	            'N',
	            NOW(),
	            NOW()
	        )
	    ]]>
	</insert>
	
	<update id="updateUser" parameterType="com.baegopa.auth.dto.User">
	    <![CDATA[
	        UPDATE users
	        SET
	            password = #{password} ,
	            updated_at = NOW()
	        WHERE
	            email = #{email}  
	    ]]>
	</update>
	
	<update id="deleteUser" parameterType="String"> 
		<![CDATA[
	        UPDATE users
	        SET
	            use_yn = 'N'
	        WHERE
	            email = #{email}
	            updated_at = NOW()
	    ]]>
	</update>
	
</mapper>

